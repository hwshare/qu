
function addBookmark(b, a) {
    if (!b) {
        b = document.title
    }
    if (!a) {
        a = window.location.href
    }
    if (window.sidebar) {
        window.sidebar.addPanel(b, a, "")
    } else {
        if (document.all) {
            window.external.AddFavorite(a, b)
        } else {
            if (window.opera || window.print) {
                alert("浏览器不支持，请使用Ctrl + D 收藏！");
                return true
            }
        }
    }
}

function get_cookie_value(a) {
    var b = a + "=";
    var c = "";
    if (document.cookie.length > 0) {
        offset = document.cookie.indexOf(b);
        if (offset != -1) {
            offset += b.length;
            end = document.cookie.indexOf(";", offset);
            if (end == -1) {
                end = document.cookie.length
            }
            c = unescape(document.cookie.substring(offset, end))
        }
    }
    return c
}
var isLogin;
function login() {
    if (isLogin) {
        document.writeln('<li><a href="/modules/article/bookcase.php">书架</a></li>');
        document.writeln('<li><a href="/userdetail.php">' + unescape(jieqiUserInfo["jieqiUserName_un"]) + "</a></li>");
        document.writeln('<li><a href="/logout.php">退出</a></li>')
    } else {
        document.writeln('<li><a href="/login.php">登录</a></li><li><a href="/register.php">注册</a></li>')
    }
}

function ReadKeyEvent() {
    var c = $("#linkIndex").attr("href");
    var a = $("#linkPrev").attr("href");
    var d = $("#linkNext").attr("href");
    function b() {
        var e = document.all ? window.event: arguments[0];
        if (e.keyCode == 37) {
            document.location = a
        }
        if (e.keyCode == 39) {
            document.location = d
        }
        if (e.keyCode == 13) {
            document.location = c
        }
    }
    document.onkeydown = b
}
function ReadTip() {
    document.writeln('<p class="clear text-muted text-center hidden-xs">温馨提示：按 回车[Enter]键 返回书目，按 ←键 返回上一页， 按 →键 进入下一页，加入书签方便您下次继续阅读。</p>')
}
function showMsg(a) {
    isLogin = isLogin && a.indexOf("您需要登录") <= 0;
    if (!isLogin) {
        if (confirm("对不起，您需要登录才能使用本功能！点击确定立即登录。")) {
            window.location.href = "/login.php?jumpurl=" + location.href
        }
        return false
    }
    alert(a.replace(/<br[^<>]*>/g, "\n"))
}
function BookVote(a) {
    $.get("/add.php?bookvote=1&aid=" + a + "&ajax_request=1",
    function(b) {
        showMsg(b)
    })
}
function BookCaseAdd(a) {
    var b = "/ajax.php?addbookcase=1&urlinfo=" + a + "&ajax_request=1";
    $.get(b,
    function(c) {
        showMsg(c)
    })
}
function BookCaseMark(a, c) {
    var b = "/add.php?addmark=1&aid=" + a + "&cid=" + c + "&ajax_request=1";
    $.get(b,
    function(d) {
        showMsg(d)
    })
}
function chapterListShow() {
    $("#btn-All").on("click",
    function() {
        var a = $("#list-chapterAll");
        var b = a.css("display") != "none";
        if (b) {
            a.hide()
        } else {
            a.show();
            var c = a.offset().top - 50;
            window.scrollTo(0, c)
        }
    })
}
function backToTop() {
    document.writeln('<div class="back-to-top" id="back-to-top" title=\'返回顶部\'><i>∨</i></div>');
    var c = ($(document).width() - $(".body-content").width()) / 2 + $(".body-content").width() + 10;
    if (is_mobile()) {
        $("#back-to-top").css({
            right: 10,
            bottom: "30%"
        })
    } else {
        $("#back-to-top").css({
            left: c
        })
    }
    $(window).resize(function() {
        if ($(document).width() - $(".body-content").width() < 100) {
            $("#back-to-top").hide()
        } else {
            $("#back-to-top").show();
            var d = ($(document).width() - $(".body-content").width()) / 2 + $(".body-content").width() + 10;
            if (is_mobile()) {
                $("#back-to-top").css({
                    right: 10,
                    bottom: "30%"
                })
            } else {
                $("#back-to-top").css({
                    left: d
                })
            }
        }
    });
    var b = window.XMLHttpRequest ? false: true;
    function a() {
        var e = $("#back-to-top");
        function d() {
            var f = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
            if (f > 100) {
                if (b) {
                    e.hide();
                    clearTimeout(window.show);
                    window.show = setTimeout(function() {
                        var g = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
                        if (g > 0) {
                            e.fadeIn(100)
                        }
                    },
                    300)
                } else {
                    e.fadeIn(100)
                }
            } else {
                e.fadeOut(100)
            }
        }
        if (b) {
            e.style.position = "absolute"
        }
        window.onscroll = d;
        d()
    }
    if (window.attachEvent) {
        window.attachEvent("onload", a)
    } else {
        window.addEventListener("load", a, false)
    }
    document.getElementById("back-to-top").onclick = function() {
        window.scrollTo(0,document.body.scrollHeight)
    }
}
function bd_push() {
    var c = document.createElement("script");
    var b = window.location.protocol.split(":")[0];
    if (b === "https") {
        c.src = "https://zz.bdstatic.com/linksubmit/push.js"
    } else {
        c.src = "http://push.zhanzhang.baidu.com/push.js"
    }
    var a = document.getElementsByTagName("script")[0];
    a.parentNode.insertBefore(c, a)
}
function tj() {

};